jQuery(document).ready(function(i){i("body").on("submit",".widg-search-form",function(s){s.preventDefault();var n=i(this);if(""!==n.find(".widg-search-terms").val()){var a={action:"widg-search-kb",widg_kb_id:n.find("#widg_kb_id").val(),search_words:n.find(".widg-search-terms").val()},d="";i.ajax({type:"GET",dataType:"json",data:a,url:widg_vars.ajaxurl,beforeSend:function(i){n.find(".widg-loading-spinner").css("display","block"),n.find("#widg-ajax-in-progress").show()}}).done(function(i){i=i||"",n.find(".widg-loading-spinner").css("display","none"),d=i.error||"success"!==i.status?widg_vars.msg_try_again:i.search_result}).fail(function(i,s,n){d=widg_vars.msg_try_again+". ["+(n||widg_vars.unknown_error)+"]"}).always(function(){n.find("#widg-ajax-in-progress").hide(),d&&(n.find(".widg-search-results").css("display","block"),n.find(".widg-search-results").html(d))})}}),i(".widg-search-terms").on("keyup",function(){this.value||i(".widg-search-results").css("display","none")}),i("body").on("click",function(){i(".widg-search-results").hide()})});